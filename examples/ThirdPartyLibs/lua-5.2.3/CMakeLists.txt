IF(BUILD_SHARED_LIBS)
	SET(CMAKE_POSITION_INDEPENDENT_CODE ON)
ENDIF()

FILE(GLOB_RECURSE lua_SRCS "src/*.c")
FILE(GLOB_RECURSE lua_HDRS "src/*.h")

ADD_LIBRARY(lua STATIC ${lua_SRCS} ${lua_HDRS})
TARGET_INCLUDE_DIRECTORIES(lua PUBLIC "$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/src>")
TARGET_COMPILE_DEFINITIONS(lua
	PUBLIC LUA_COMPAT_ALL
	INTERFACE ENABLE_LUA)
IF(APPLE)
	TARGET_COMPILE_DEFINITIONS(lua PUBLIC
		LUA_USE_MACOSX)
ELSEIF(WIN32)
ELSE()
	TARGET_COMPILE_DEFINITIONS(lua PUBLIC
		LUA_USE_LINUX)
ENDIF()
